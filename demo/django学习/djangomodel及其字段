å‰è¨€
Django æ¨¡å‹æ˜¯ä¸æ•°æ®åº“ç›¸å…³çš„ï¼Œä¸æ•°æ®åº“ç›¸å…³çš„ä»£ç ä¸€èˆ¬å†™åœ¨ models.py ä¸­ï¼ŒDjango æ”¯æŒ sqlite3, MySQL, PostgreSQLç­‰æ•°æ®åº“
åªéœ€è¦åœ¨settings.pyä¸­é…ç½®å³å¯ï¼Œä¸ç”¨æ›´æ”¹models.pyä¸­çš„ä»£ç ã€‚å½“æˆ‘ä»¬çš„webé¡¹ç›®éœ€è¦æ–°å¢ä¸€å¼ è¡¨å’Œå­—æ®µå†…å®¹æ—¶ï¼Œéœ€è¦åœ¨models.pyé‡Œé¢å†™ç›¸å…³å†…å®¹ã€‚

é…ç½®æ•°æ®åº“
djangoé…ç½®mysqlæ•°æ®åº“æ•™ç¨‹å‚è€ƒå‰é¢ä¸€ç¯‡https://www.cnblogs.com/yoyoketang/p/9997520.html

éœ€å…ˆå®‰è£…mysqlæ•°æ®åº“é©±åŠ¨ pip install mysqlclient==1.3.10

settings.py æ–‡ä»¶ä¸­æ‰¾åˆ° DATABASES é…ç½®é¡¹, djangoé»˜è®¤è¿æ¥sqlliteã€‚ENGINEï¼šæ˜¯æŒ‡è¿æ¥æ•°æ®åº“é©±åŠ¨çš„åç§°,æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š

django.db.backends.postgresql è¿æ¥ PostgreSQL
django.db.backends.mysql è¿æ¥ mysql
django.db.backends.sqlite3 è¿æ¥ sqlite
django.db.backends.oracle è¿æ¥ oracle
è¿™é‡Œæˆ‘ä»¬è¿æ¥mysqléœ€è¦è´¦æˆ·å¯†ç ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰å®‰è£…mysqlçš„rootç”¨æˆ·åï¼Œå’Œè‡ªå·±è®¾ç½®çš„å¯†ç ï¼ŒNAMEæ˜¯æ•°æ®åº“çš„åç§°ï¼Œè¿æ¥é…ç½®å¦‚ä¸‹ï¼š

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',  # æˆ–è€…ä½¿ç”¨ mysql.connector.django
        'NAME': 'test',
        'USER': 'root',
        'PASSWORD': 'yoyo',
        'HOST':'localhost',
        'PORT':'3306',
    }
}
djangoé‡Œé¢æ— æ³•åˆ›å»ºæ•°æ®åº“ï¼Œæ•°æ®åº“åç§°testéœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œåªèƒ½åˆ›å»ºè¡¨å

åˆ›å»ºè¡¨
ç¼–è¾‘models.pyæ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘æƒ³æ–°å¢ä¸€å¼ personè¡¨ï¼Œæœ‰2ä¸ªå­—æ®µï¼šnameã€ageã€‚nameæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œageæ˜¯intç±»å‹

å¸Œæœ›åˆ›å»ºçš„è¡¨å’Œå­—æ®µæ•ˆæœè®¾è®¡å¦‚ä¸‹ï¼ˆç”¨navicatå·¥å…·æŸ¥çœ‹çš„ï¼‰



é‚£ä¹ˆå¯¹åº”models.pyæ–‡ä»¶ä»£ç ä¸º

# models.py

from django.db import models

# Create your models here.

# æˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªPersonç±»ï¼Œç»§æ‰¿è‡ªmodels.Model,
class Person(models.Model):
    name = models.CharField(max_length=30)
    age = models.IntegerField()

æ¥ç€æ‰“å¼€cmd,cdåˆ°djangoçš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œ2ä¸ªæŒ‡ä»¤

python manage.py makemigrations
python manage.py migrate

D:\web_djo\helloworld>python manage.py makemigrations
Migrations for 'hello':
  hello\migrations\0006_person.py
    - Create model Person

D:\web_djo\helloworld>python manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, hello, sessions
Running migrations:
  Applying hello.0006_person... OK
makemigrationså’Œmigrate
makemigrations è¿™ä¸€æ­¥æ‰§è¡Œåï¼Œä¼šåœ¨å½“å‰appç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªmigrationsæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹çš„å†…å®¹å°±æ˜¯æ•°æ®åº“è¦æ‰§è¡Œçš„å†…å®¹



migrateå°±æ˜¯æ‰§è¡Œä¹‹å‰ç”Ÿæˆçš„migrationsæ–‡ä»¶ï¼Œè¿™ä¸€æ­¥æ‰æ˜¯æ“ä½œæ•°æ®åº“çš„ä¸€æ­¥ï¼Œæ‰§è¡Œå®Œæˆåï¼Œæ•°æ®åº“é‡Œé¢ä¼šæ–°å¢ä¸€å¼ è¡¨hello_person



æ–°å»ºçš„è¡¨åæ˜¯appåç§°_classç±»åç§°çš„ç»„åˆï¼Œè‡ªåŠ¨è½¬åŒ–æˆå°å†™ï¼Œä¹Ÿå°±æ˜¯hello_person

name = models.CharField(max_length=30) è¿™ä¸ªè¡¨ç¤ºnameå­—æ®µæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼ˆCharFieldï¼‰ï¼Œæœ€å¤§é•¿åº¦æ˜¯30ä¸ªå­—ç¬¦ä¸²

age = models.IntegerField() è¿™ä¸ªè¡¨ç¤ºageå­—æ®µæ˜¯intç±»å‹ï¼ˆCharFieldï¼‰

idæ˜¯é»˜è®¤çš„ä¸»é”®

å­—æ®µç±»å‹
djangoçš„modelsé‡Œé¢å­—æ®µç±»å‹é™¤äº†ä¸Šé¢çš„å¸¸ç”¨çš„ models.CharFieldå’Œmodels.IntegerFieldï¼Œè¿˜æœ‰æ›´å¤šçš„ç±»å‹

1ã€models.AutoFieldã€€ã€€è‡ªå¢åˆ—= int(11)
ã€€ã€€å¦‚æœæ²¡æœ‰çš„è¯ï¼Œé»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ªåç§°ä¸º id çš„åˆ—ï¼Œå¦‚æœè¦æ˜¾ç¤ºçš„è‡ªå®šä¹‰ä¸€ä¸ªè‡ªå¢åˆ—ï¼Œå¿…é¡»å°†ç»™åˆ—è®¾ç½®ä¸ºä¸»é”® primary_key=Trueã€‚
2ã€models.CharFieldã€€ã€€å­—ç¬¦ä¸²å­—æ®µ
ã€€ã€€å¿…é¡» max_length å‚æ•°
3ã€models.BooleanFieldã€€ã€€å¸ƒå°”ç±»å‹=tinyint(1)
ã€€ã€€ä¸èƒ½ä¸ºç©ºï¼ŒBlank=True
4ã€models.ComaSeparatedIntegerFieldã€€ã€€ç”¨é€—å·åˆ†å‰²çš„æ•°å­—=varchar
ã€€ã€€ç»§æ‰¿CharFieldï¼Œæ‰€ä»¥å¿…é¡» max_lenght å‚æ•°
5ã€models.DateFieldã€€ã€€æ—¥æœŸç±»å‹ date
ã€€ã€€å¯¹äºå‚æ•°ï¼Œauto_now =Trueåˆ™æ¯æ¬¡æ›´æ–°éƒ½ä¼šæ›´æ–°è¿™ä¸ªæ—¶é—´ï¼›auto_now_add åˆ™åªæ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºæ·»åŠ ï¼Œä¹‹åçš„æ›´æ–°ä¸å†æ”¹å˜ã€‚
6ã€models.DateTimeFieldã€€ã€€æ—¥æœŸç±»å‹ datetime
ã€€ã€€åŒDateFieldçš„å‚æ•°
7ã€models.Decimalã€€ã€€åè¿›åˆ¶å°æ•°ç±»å‹= decimal
ã€€ã€€å¿…é¡»æŒ‡å®šæ•´æ•°ä½max_digitså’Œå°æ•°ä½decimal_places
8ã€models.EmailFieldã€€ã€€å­—ç¬¦ä¸²ç±»å‹ï¼ˆæ­£åˆ™è¡¨è¾¾å¼é‚®ç®±ï¼‰=varchar
ã€€ã€€å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼
9ã€models.FloatFieldã€€ã€€æµ®ç‚¹ç±»å‹= double
10ã€models.IntegerFieldã€€ã€€æ•´å½¢
11ã€models.BigIntegerFieldã€€ã€€é•¿æ•´å½¢
ã€€ã€€integer_field_ranges ={
ã€€ã€€ã€€ã€€'SmallIntegerField'ğŸ˜¦-32768,32767),
ã€€ã€€ã€€ã€€'IntegerField'ğŸ˜¦-2147483648,2147483647),
ã€€ã€€ã€€ã€€'BigIntegerField'ğŸ˜¦-9223372036854775808,9223372036854775807),
ã€€ã€€ã€€ã€€'PositiveSmallIntegerField':(0,32767),
ã€€ã€€ã€€ã€€'PositiveIntegerField':(0,2147483647),
ã€€ã€€}
12ã€models.IPAddressFieldã€€ã€€å­—ç¬¦ä¸²ç±»å‹ï¼ˆip4æ­£åˆ™è¡¨è¾¾å¼ï¼‰
13ã€models.GenericIPAddressFieldã€€ã€€å­—ç¬¦ä¸²ç±»å‹ï¼ˆip4å’Œip6æ˜¯å¯é€‰çš„ï¼‰
ã€€ã€€å‚æ•°protocolå¯ä»¥æ˜¯ï¼šbothã€ipv4ã€ipv6
ã€€ã€€éªŒè¯æ—¶ï¼Œä¼šæ ¹æ®è®¾ç½®æŠ¥é”™
14ã€models.NullBooleanFieldã€€ã€€å…è®¸ä¸ºç©ºçš„å¸ƒå°”ç±»å‹
15ã€models.PositiveIntegerFielã€€ã€€æ­£Integer
16ã€models.PositiveSmallIntegerFieldã€€ã€€æ­£smallInteger
17ã€models.SlugFieldã€€ã€€å‡å·ã€ä¸‹åˆ’çº¿ã€å­—æ¯ã€æ•°å­—
18ã€models.SmallIntegerFieldã€€ã€€æ•°å­—
ã€€ã€€æ•°æ®åº“ä¸­çš„å­—æ®µæœ‰ï¼štinyintã€smallintã€intã€bigint
19ã€models.TextFieldã€€ã€€å­—ç¬¦ä¸²=longtext
20ã€models.TimeFieldã€€ã€€æ—¶é—´ HH:MM[:ss[.uuuuuu]]
21ã€models.URLFieldã€€ã€€å­—ç¬¦ä¸²ï¼Œåœ°å€æ­£åˆ™è¡¨è¾¾å¼
22ã€models.BinaryFieldã€€ã€€äºŒè¿›åˆ¶
23ã€models.ImageFieldå›¾ç‰‡
24ã€models.FilePathFieldæ–‡ä»¶

å­—æ®µå‚æ•°
å¯¹åº”çš„å­—æ®µå‚æ•°å¦‚ä¸‹ï¼š

1ã€null=True
ã€€ã€€æ•°æ®åº“ä¸­å­—æ®µæ˜¯å¦å¯ä»¥ä¸ºç©º
2ã€blank=True
ã€€ã€€djangoçš„ Admin ä¸­æ·»åŠ æ•°æ®æ—¶æ˜¯å¦å¯å…è®¸ç©ºå€¼
3ã€primary_key = False
ã€€ã€€ä¸»é”®ï¼Œå¯¹AutoFieldè®¾ç½®ä¸»é”®åï¼Œå°±ä¼šä»£æ›¿åŸæ¥çš„è‡ªå¢ id åˆ—
4ã€auto_now å’Œ auto_now_add
ã€€ã€€auto_now è‡ªåŠ¨åˆ›å»º---æ— è®ºæ·»åŠ æˆ–ä¿®æ”¹ï¼Œéƒ½æ˜¯å½“å‰æ“ä½œçš„æ—¶é—´
ã€€ã€€auto_now_add è‡ªåŠ¨åˆ›å»º---æ°¸è¿œæ˜¯åˆ›å»ºæ—¶çš„æ—¶é—´
5ã€choices
GENDER_CHOICE = (
(u'M', u'Male'),
(u'F', u'Female'),
)
gender = models.CharField(max_length=2,choices = GENDER_CHOICE)
6ã€max_length
7ã€defaultã€€ã€€é»˜è®¤å€¼
8ã€verbose_nameã€€ã€€Adminä¸­å­—æ®µçš„æ˜¾ç¤ºåç§°
9ã€name|db_columnã€€ã€€æ•°æ®åº“ä¸­çš„å­—æ®µåç§°
10ã€unique=Trueã€€ã€€ä¸å…è®¸é‡å¤
11ã€db_index = Trueã€€ã€€æ•°æ®åº“ç´¢å¼•
12ã€editable=Trueã€€ã€€åœ¨Adminé‡Œæ˜¯å¦å¯ç¼–è¾‘
13ã€error_messages=Noneã€€ã€€é”™è¯¯æç¤º
14ã€auto_created=Falseã€€ã€€è‡ªåŠ¨åˆ›å»º
15ã€help_textã€€ã€€åœ¨Adminä¸­æç¤ºå¸®åŠ©ä¿¡æ¯
16ã€validators=[]
17ã€upload-to


å…³äºæŸ¥è¯¢
é€šè¿‡objectsè¿™ä¸ªæ¨¡å‹ç®¡ç†å™¨çš„all()è·å¾—æ‰€æœ‰æ•°æ®è¡Œï¼Œç›¸å½“äºSQLä¸­çš„SELECT * FROM
a = User.objects.all()

filterç›¸å½“äºSQLä¸­çš„WHEREï¼Œå¯è®¾ç½®æ¡ä»¶è¿‡æ»¤ç»“æœ
b = User.objects.filter(id=1)

è·å–å•ä¸ªå¯¹è±¡
c = User.objects.get(id=1)

é™åˆ¶è¿”å›çš„æ•°æ® ç›¸å½“äº SQL ä¸­çš„ OFFSET 0 LIMIT 2;
d = User.objects.order_by('name')[0:2]

æŸ¥è¯¢ç»“æœæ’åº
e = User.objects.order_by("id")

ä¸Šé¢çš„æ–¹æ³•å¯ä»¥è¿ç€ä½¿ç”¨
f = User.objects.filter(name="runoob").order_by("id")